{"ast":null,"code":"module.exports = Stack;\nvar Url = require('url');\nfunction Stack( /*layers*/\n) {\n  var error = Stack.errorHandler,\n    handle = error;\n  Array.prototype.slice.call(arguments).reverse().forEach(function (layer) {\n    var child = handle;\n    handle = function (req, res) {\n      try {\n        layer(req, res, function (err) {\n          if (err) {\n            return error(req, res, err);\n          }\n          child(req, res);\n        });\n      } catch (err) {\n        error(req, res, err);\n      }\n    };\n  });\n  return handle;\n}\nStack.errorHandler = function error(req, res, err) {\n  if (err) {\n    console.error(err.stack);\n    res.writeHead(500, {\n      \"Content-Type\": \"text/plain\"\n    });\n    res.end(err.stack + \"\\n\");\n    return;\n  }\n  res.writeHead(404, {\n    \"Content-Type\": \"text/plain\"\n  });\n  res.end(\"Not Found\\n\");\n};\nfunction core(req, res, next) {\n  next();\n}\n\n// Build a composite stack made of several layers\nStack.compose = function compose( /*layers*/\n) {\n  // Don't bother composing singletons\n  if (arguments.length == 1) {\n    return arguments[0];\n  }\n  var stack = core;\n  Array.prototype.slice.call(arguments).reverse().forEach(function (layer) {\n    var child = stack;\n    stack = function (req, res, next) {\n      try {\n        layer(req, res, function (err) {\n          if (err) {\n            return next(err);\n          }\n          child(req, res, next);\n        });\n      } catch (err) {\n        next(err);\n      }\n    };\n  });\n  return stack;\n};\n\n// Mounts a substack app at a url subtree\nStack.mount = function mount(mountpoint /*, stack*/) {\n  var stack = Stack.compose.apply(null, Array.prototype.slice.call(arguments, 1));\n  if (mountpoint.substr(mountpoint.length - 1) == \"/\") {\n    mountpoint = mountpoint.substr(0, mountpoint.length - 1);\n  }\n  var matchpoint = mountpoint + \"/\";\n  return function (req, res, next) {\n    var url = req.url;\n    var uri = req.uri;\n    if (url.substr(0, matchpoint.length) !== matchpoint) {\n      return next();\n    }\n\n    // Modify the url\n    if (!req.realUrl) {\n      req.realUrl = url;\n    }\n    req.url = url.substr(mountpoint.length);\n    if (req.uri) {\n      req.uri = Url.parse(req.url);\n    }\n    stack(req, res, function (err) {\n      req.url = url;\n      req.uri = uri;\n      next(err);\n    });\n  };\n};","map":{"version":3,"names":["module","exports","Stack","Url","require","error","errorHandler","handle","Array","prototype","slice","call","arguments","reverse","forEach","layer","child","req","res","err","console","stack","writeHead","end","core","next","compose","length","mount","mountpoint","apply","substr","matchpoint","url","uri","realUrl","parse"],"sources":["C:/Users/ICARU/OneDrive/Documentos/Programa√ßao/One-Oracle-Curso/React/agendamento/node_modules/stack/stack.js"],"sourcesContent":["module.exports = Stack;\nvar Url = require('url');\n\nfunction Stack(/*layers*/) {\n  var error = Stack.errorHandler,\n      handle = error;\n  Array.prototype.slice.call(arguments).reverse().forEach(function (layer) {\n    var child = handle;\n    handle = function (req, res) {\n      try {\n        layer(req, res, function (err) {\n          if (err) { return error(req, res, err); }\n          child(req, res);\n        });\n      } catch (err) {\n        error(req, res, err);\n      }\n    };\n  });\n  return handle;\n}\nStack.errorHandler = function error(req, res, err) {\n  if (err) {\n    console.error(err.stack);\n    res.writeHead(500, {\"Content-Type\": \"text/plain\"});\n    res.end(err.stack + \"\\n\");\n    return;\n  }\n  res.writeHead(404, {\"Content-Type\": \"text/plain\"});\n  res.end(\"Not Found\\n\");\n};\n\nfunction core(req, res, next) { next(); }\n\n// Build a composite stack made of several layers\nStack.compose = function compose(/*layers*/) {\n  // Don't bother composing singletons\n  if (arguments.length == 1) { return arguments[0]; }\n\n  var stack = core;\n  Array.prototype.slice.call(arguments).reverse().forEach(function (layer) {\n\n    var child = stack;\n    stack = function (req, res, next) {\n      try {\n        layer(req, res, function (err) {\n          if (err) { return next(err); }\n          child(req, res, next);\n        });\n      } catch (err) {\n        next(err);\n      }\n    };\n\n  });\n\n  return stack;\n}\n\n// Mounts a substack app at a url subtree\nStack.mount = function mount(mountpoint/*, stack*/) {\n\n  var stack = Stack.compose.apply(null, Array.prototype.slice.call(arguments, 1));\n\n  if (mountpoint.substr(mountpoint.length - 1) == \"/\") {\n    mountpoint = mountpoint.substr(0, mountpoint.length - 1);\n  }\n\n  var matchpoint = mountpoint + \"/\";\n\n  return function (req, res, next) {\n    var url = req.url;\n    var uri = req.uri;\n\n    if (url.substr(0, matchpoint.length) !== matchpoint) { return next(); }\n\n    // Modify the url\n    if (!req.realUrl) { req.realUrl = url; }\n\n    req.url = url.substr(mountpoint.length);\n    if (req.uri) { req.uri = Url.parse(req.url); }\n\n    stack(req, res, function (err) {\n      req.url = url;\n      req.uri = uri;\n      next(err)\n    });\n\n  };\n\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}